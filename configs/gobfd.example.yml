# GoBFD daemon configuration example.
#
# All settings can be overridden via environment variables:
#   GOBFD_GRPC_ADDR=:50051
#   GOBFD_METRICS_ADDR=:9100
#   GOBFD_METRICS_PATH=/metrics
#   GOBFD_LOG_LEVEL=debug
#   GOBFD_LOG_FORMAT=text

grpc:
  # gRPC (ConnectRPC) listen address.
  addr: ":50051"

metrics:
  # Prometheus metrics endpoint.
  addr: ":9100"
  path: "/metrics"

log:
  # Log level: debug, info, warn, error.
  level: "info"
  # Log format: json, text.
  format: "json"

bfd:
  # Default BFD session parameters (can be overridden per session via gRPC).
  #
  # IMPORTANT: BFD intervals are in microseconds per RFC 5880.
  # Use duration strings for convenience (converted internally).
  default_desired_min_tx: "1s"
  default_required_min_rx: "1s"
  default_detect_multiplier: 3

# GoBGP integration (RFC 5882 Section 4.3).
# When enabled, BFD state changes are propagated to a GoBGP instance
# via its gRPC API. BFD Down triggers BGP peer disable; BFD Up re-enables.
#
# gobgp:
#   enabled: true
#   # GoBGP gRPC API address. Use a different port than gobfd's own gRPC.
#   addr: "127.0.0.1:50052"
#   # Strategy: "disable-peer" (default) or "withdraw-routes" (future).
#   strategy: "disable-peer"
#   # RFC 5882 Section 3.2: flap dampening prevents rapid BFD oscillation
#   # from causing excessive BGP route churn.
#   dampening:
#     enabled: false
#     suppress_threshold: 3
#     reuse_threshold: 2
#     max_suppress_time: "60s"
#     half_life: "15s"

# Declarative BFD sessions. Sessions defined here are created on startup
# and reconciled on SIGHUP reload (new sessions added, removed sessions
# destroyed, existing sessions left untouched).
#
# sessions:
#   - peer: "10.0.0.1"
#     local: "10.0.0.2"
#     interface: "eth0"
#     type: single_hop
#     desired_min_tx: "100ms"
#     required_min_rx: "100ms"
#     detect_mult: 3
#   - peer: "10.0.1.1"
#     local: "10.0.1.2"
#     type: multi_hop
#     desired_min_tx: "300ms"
#     required_min_rx: "300ms"
#     detect_mult: 5
